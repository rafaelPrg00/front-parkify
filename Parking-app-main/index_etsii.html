<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Reserva de parking</title>
  <link rel="icon" type="image/png" href="imagenes/coche.png">

  <script src="https://cdn.tailwindcss.com"></script>

  <link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body class="min-h-screen bg-neutral-50 text-neutral-800">
  <div class="barra-sitio-simple">
    <a class="logo-link">
      <img src="imagenes/coche.png" alt="Logo Parkify" class="logo-pequeno">
      <span class="nombre-sitio">Parkify</span>
    </a>
    <a href="index.html" class="enlace-casa">
      <img src="imagenes/lococasa2.png" alt="Inicio" class="icono-casa-img">
    </a>
    </a>
  </div>

  <!--CABEZERA-->
  <header class="bg-neutral-800 text-white">
    <div class="w-full px-3 py-2 flex items-center justify-between">

      <img src="assets/logoUS.png" class="w-6 sm:w-8 md:w-10 lg:w-12 h-auto" alt="Logo Universidad de Sevilla">

      <h1 class="font-bold text-lg md:text-2xl text-center font-mont">Reserva de parking Escuela Técnica Superior de
        Ingeniería Informática</h1>

      <div class="flex items-center space-x-7">
        <button onclick="salir()"><img src="assets/logo_salir.png" class="w-12" alt="salir"></button>
      </div>

    </div>
  </header>

  <main class="mx-auto max-w-5xl px-4 py-6">

    <section class="grid gap-4 md:grid-cols-3">
      <div class="md:col-span-2 rounded-2xl border bg-white p-4">

        <!--Selección de fecha y hora-->
        <h2 class="text-lg font-semibold mb-4">Selecciona horario</h2>
        <div class="flex gap-3 items-center mb-4">
          <label class="text-sm text-neutral-600">Fecha</label>
          <input type="date" id="fecha-input" class="rounded-xl border px-3 py-2 text-sm" />
          <div class="ml-auto inline-flex items-center gap-2 rounded-xl border px-3 py-2 bg-green-50 border-green-200">
            <span class="h-2 w-2 rounded-full bg-green-500"></span>
            <span class="text-sm font-medium"></span>
          </div>
        </div>

        <div class="grid gap-4 md:grid-cols-2">
          <div>
            <label class="block text-sm text-neutral-600 mb-1">Hora de entrada</label>
            <input type="time" min="07:00" max="23:00" class="w-full rounded-xl border px-3 py-2"
              id="hora-inicio-input" />
          </div>
          <div>
            <label class="block text-sm text-neutral-600 mb-1">Hora de salida</label>
            <input type="time" min="07:00" max="23:00" class="w-full rounded-xl border px-3 py-2" id="hora-fin-input" />
          </div>
        </div>

        <!-- PLANO -->
        <img src="assets/parking_etsii.png" alt="Plano de parkings"
          class="w-2/3 mx-auto rounded-xl mb-6 mt-4 shadow-md">

        <!-- BOTÓN CONSULTAR -->
        <div class="mt-4">
          <button onclick="consultaDisponibilidad(event)"
            class="rounded-xl bg-neutral-900 text-white px-4 py-2 text-sm hover:bg-black">
            Consultar disponibilidad
          </button>
          <div id="contenedor-botones"></div>
        </div>

        <!-- BOTONES DE ZONA (RESERVA POR ZONA) -->
        <div class="mt-6">
          <div class="space-y-2">
            <template>
              <button type="button" class="w-full flex items-center justify-between rounded-xl border px-3 py-2 text-sm bg-neutral-50 transition
                             hover:bg-neutral-100">
                <div class="flex items-center gap-2">
                  <span class="h-2 w-2 rounded-full"></span>
                  <span class="font-medium"></span>
                </div>

              </button>
            </template>
          </div>
        </div>

      </div>


      <!-- BLOQUE DERECHO (RESUMEN) -->
      <aside class="space-y-4">

        <!-- editar coche -->
        <div class="rounded-2xl border bg-white p-4">
          <div class="text-sm font-semibold mb-3">Tu vehículo</div>

          <div class="flex items-center gap-3 mb-3">
            <img src="assets/logo_coche.png" class="w-10" alt="">
            <div>
              <div id="matricula-text" class="font-semibold tracking-wide"></div>
              <div id="modelo-text" class="text-sm text-neutral-600"></div>
            </div>
          </div>

          <button onclick="openVehicleModal()"
            class="rounded-xl bg-blue-600 text-white px-3 py-2 text-sm hover:bg-blue-700">
            Editar
          </button>
        </div>

        <!-- reserva -->
        <div class="rounded-2xl border bg-white p-4">
          <div class="text-sm font-semibold mb-2">Resumen de la reserva</div>

          <ul class="text-sm space-y-1">
            <li><span class="font-medium">Fecha:</span> <span id="textoFecha"></span></li>
            <li><span class="font-medium">Zona:</span> <span id="textoZona"></span></li>
            <li><span class="font-medium">Hora entrada:</span> <span id="textoEntrada"></span></li>
            <li><span class="font-medium">Hora salida:</span> <span id="textoSalida"></span></li>
            <li><span class="font-medium">Coste:</span> <span id="textoPrecio"></span></li>
          </ul>

          <div class="mt-3 text-xs text-red-700 bg-red-50 rounded-xl p-2" x-show="invalidRange()">
            La hora de salida debe ser posterior a la de entrada.
          </div>

          <div class="mt-4 flex gap-2">
            <button onclick="mandarReserva()" 
              id = "btn-confirmar"
              class="flex-1 rounded-xl bg-green-500 text-white px-3 py-2 text-sm font-medium enabled:hover:bg-green-600 disabled:opacity-60">
              Confirmar
            </button>

           
          </div>
        </div>
        <div class="rounded-2xl border bg-white p-4">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-sm font-bold text-neutral-700 uppercase">Mis Reservas</h2>
            <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-semibold"
              id="contador-reservas">0</span>
          </div>

          <div id="contenedor-reservas" class="space-y-3 overflow-y-auto max-h-80 pr-1">
           
          </div>
        </div>
      </aside>

    </section>

    <div class="mi-modal" id="mi-modal">
      <div class="bg-white rounded-2xl shadow-xl w-full max-w-sm p-5">
        <h3 class="text-base font-semibold mb-4">Editar vehículo</h3>
        <div class="space-y-3">
          <div>
            <label class="block text-sm text-neutral-700 mb-1">Matrícula</label>
            <input pattern="[A-Z]{3}-[0-9]{4}" title="Debe ser 3 letras mayúsculas, un guion y 4 números (Ej: ABC-1234)"
              required type="text" id="matricula-input" class="w-full rounded-xl border px-3 py-2 text-sm"
              placeholder="Ej: ABC-1234">
          </div>

          <div>
            <label class="block text-sm text-neutral-700 mb-1">Modelo</label>
            <input type="text" id="modelo-input" class="w-full rounded-xl border px-3 py-2 text-sm"
              placeholder="Ej: Seat Ibiza">
          </div>
        </div>

        <div class="mt-5 flex justify-end gap-2">
          <button type="button" onclick="cerrar()" class="rounded-xl px-3 py-2 text-sm border border-neutral-300">
            Cancelar
          </button>
          <button type="button" onclick="putCoche(event); cerrar()"
            class="rounded-xl px-3 py-2 text-sm bg-blue-600 text-white hover:bg-blue-700">
            Guardar
          </button>
        </div>
      </div>
    </div>
    <script src="index_parking.js"></script>

  </main>

</body>

</html>